<div class="container-fluid mt-4">
  <div class="card">
    <div class="card-header">
      <h4 class="mb-0">Sistem Aktivite Günlüğü</h4>
    </div>
    
    <div class="card-body">
      <!-- Filtreleme -->
      <form [formGroup]="filterForm" (ngSubmit)="applyFilter()" class="mb-4">
        <div class="row g-3">
          <div class="col-md-3">
            <label for="userEmail" class="form-label">Kullanıcı E-posta</label>
            <input type="email" class="form-control" id="userEmail" formControlName="user_email" placeholder="Kullanıcı ara...">
          </div>
          
          <div class="col-md-2">
            <label for="action" class="form-label">İşlem</label>
            <select class="form-select" id="action" formControlName="action">
              <option value="">Tümü</option>
              <option value="create">Oluşturma</option>
              <option value="update">Güncelleme</option>
              <option value="delete">Silme</option>
              <option value="login">Giriş</option>
              <option value="logout">Çıkış</option>
            </select>
          </div>
          
          <div class="col-md-2">
            <label for="entity" class="form-label">Modül</label>
            <select class="form-select" id="entity" formControlName="entity">
              <option value="">Tümü</option>
              <option value="user">Kullanıcı</option>
              <option value="role">Rol</option>
              <option value="category">Kategori</option>
              <option value="auth">Oturum</option>
            </select>
          </div>
          
          <div class="col-md-2">
            <label for="startDate" class="form-label">Başlangıç Tarihi</label>
            <input type="date" class="form-control" id="startDate" formControlName="startDate">
          </div>
          
          <div class="col-md-2">
            <label for="endDate" class="form-label">Bitiş Tarihi</label>
            <input type="date" class="form-control" id="endDate" formControlName="endDate">
          </div>
          
          <div class="col-md-1 d-flex align-items-end">
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-search"></i>
              </button>
              <button type="button" class="btn btn-outline-secondary" (click)="resetFilter()">
                <i class="bi bi-x-lg"></i>
              </button>
            </div>
          </div>
        </div>
      </form>
      
      <!-- Yükleniyor -->
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Yükleniyor...</span>
        </div>
      </div>
      
      <!-- Kayıt yok -->
      <div *ngIf="!loading && logs.length === 0" class="alert alert-info">
        <i class="bi bi-info-circle me-2"></i> Bu kriterlere uygun aktivite kaydı bulunmuyor.
      </div>
      
      <!-- Aktivite listesi -->
      <div *ngIf="!loading && logs.length > 0" class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Tarih</th>
              <th>Kullanıcı</th>
              <th>İşlem</th>
              <th>Modül</th>
              <th>Detaylar</th>
              <th>IP Adresi</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of logs">
              <td>{{ log.created_at | date:'medium' }}</td>
              <td>{{ log.user_email }}</td>
              <td>
                <span class="badge" [ngClass]="getActionClass(log.action)">{{ log.action }}</span>
              </td>
              <td>{{ log.entity }}</td>
              <td>{{ log.details || '-' }}</td>
              <td>{{ log.ip_address || '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Sayfalama -->
      <nav *ngIf="totalPages > 1" aria-label="Sayfalama">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" href="javascript:void(0)" (click)="onPageChange(currentPage - 1)">
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>
          
          <li class="page-item" *ngFor="let page of pages" [class.active]="page === currentPage">
            <a class="page-link" href="javascript:void(0)" (click)="onPageChange(page)">
              {{ page }}
            </a>
          </li>
          
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" href="javascript:void(0)" (click)="onPageChange(currentPage + 1)">
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    
    <div class="card-footer text-muted">
      <small>Toplam {{ totalLogs }} aktivite kaydı bulundu.</small>
    </div>
  </div>
</div>