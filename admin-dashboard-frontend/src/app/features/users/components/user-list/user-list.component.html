<div class="container-fluid p-4">
  <!-- Kullanıcı Listesi Başlık ve Yeni Kullanıcı Butonu -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Kullanıcılar</h2>
    <a 
      routerLink="/users/add"
      class="btn btn-primary" 
      *ngIf="hasPermission(SystemPermissions.USER_ADD)"
    >
      <i class="bi bi-person-plus-fill me-2"></i>Yeni Kullanıcı
    </a>
  </div>

  <!-- Hata Mesajı -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Yükleniyor Göstergesi -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Yükleniyor...</span>
    </div>
    <p class="mt-2">Kullanıcılar yükleniyor...</p>
  </div>

  <!-- Kullanıcı Tablosu -->
  <div *ngIf="!loading && users.length > 0" class="card">
    <div class="table-responsive">
      <table class="table table-hover table-striped mb-0">
        <thead>
          <tr>
            <th>Ad Soyad</th>
            <th>E-posta</th>
            <th>Roller</th>
            <th>Durum</th>
            <th>Kayıt Tarihi</th>
            <th>İşlemler</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.first_name }} {{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ getUserRoleNames(user) }}</td>
            <td>
              <span [ngClass]="getStatusBadgeClass(user.is_active)">
                {{ getStatusText(user.is_active) }}
              </span>
            </td>
            <td>{{ user.created_at | date:'medium' }}</td>
            <td>
              <div class="btn-group">
                <a 
                  [routerLink]="['/users/edit', user.id]" 
                  class="btn btn-sm btn-outline-primary"
                  *ngIf="hasPermission(SystemPermissions.USER_EDIT)"
                >
                  <i class="bi bi-pencil"></i>
                </a>
                <button 
                  (click)="deleteUser(user.id)" 
                  class="btn btn-sm btn-outline-danger"
                  *ngIf="hasPermission(SystemPermissions.USER_DELETE)"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Kullanıcı Bulunamadı Mesajı -->
  <div *ngIf="!loading && users.length === 0" class="alert alert-info">
    Kayıtlı kullanıcı bulunamadı.
  </div>
</div>